<style>
.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 1000;
  display: none;
  float: left;
  min-width: 10rem;
  padding: 0.5rem 0;
  margin: 0.125rem 0 0;
  font-size: 1rem;
  color: #212529;
  text-align: left;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid rgba(0,0,0,.15);
  border-radius: .25rem;
}

.dropdown-menu li {
  padding: .5rem 1rem;
  cursor: pointer;
}

.dropdown-menu li:hover {
  background-color: #f8f9fa;
}
</style>


<div class="flex flex-col w-full" data-controller="form--add-element behaviour--hiddenable" data-form--add-element-child-index-value="new_contact"
  data-behaviour--hiddenable-props-class='hidden' data-form--add-element-limit-of-elements=9 
  data-form--add-element-current-elements-value="<%= @parsed_data&.count %>">

  <div data-form--add-element-target="list">
    <% @parsed_data.each_with_index do |item, index| %>
      
      <div class='flex space-y-2 space-x-2 justify-center items-center' data-controller='behaviour--removeable form--autocomplete' data-form--autocomplete-search-url-value="<%= admin_contacts_searches_path %>" data-form--autocomplete-set-code-value="true">
        <%= form.label "tech contact code #{index}", class: 'block text-sm font-medium text-gray-700 w-64' %>

      <%= component 'form/autocomplete_input', form: form, attribute: :value, heroicon_name: 'user', placeholder: 'ABC:123',
          data_attributes: { action: "input->form--autocomplete#search", form__autocomplete_target: "input" },
          value: item %>

      <%= form.hidden_field "settings[#{setting.id}][]", data: { form__autocomplete_target: "hiddenInput" }, value: item %>

        <a class='cursor-pointer rounded-full p-1 bg-red-400 hover:bg-red-600 w-8 text-white' data-action="behaviour--removeable#remove">
          delete
        </a>
      </div>
    <% end %>
  </div>


  <div class='text-right'>
    <a class='rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500
              focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600 cursor-pointer add-contact-button' 
              data-action="click->form--add-element#addElement"><%= t('.add_contact') %></a>
  </div>

  <template id="new-contact-template" data-form--add-element-target="template">
    <div class='flex space-y-2 space-x-2 justify-center items-center' data-controller='behaviour--removeable form--autocomplete' data-form--autocomplete-search-url-value="<%= admin_contacts_searches_path %>" data-form--autocomplete-set-code-value="true">
      <%= form.label "tech contact code 1", class: 'block text-sm font-medium text-gray-700 w-64' %>
      
      <%= component 'form/autocomplete_input', form: form, attribute: :value, heroicon_name: 'user', placeholder: 'ABC:123',
          data_attributes: { action: "input->form--autocomplete#search", form__autocomplete_target: "input" },
          value: nil %>

      <%= form.hidden_field "settings[#{setting.id}][]", data: { form__autocomplete_target: "hiddenInput" } %>

      <div class='p2 w-16'>
      <a class='cursor-pointer rounded-full p-1 bg-red-400 hover:bg-red-600 w-8 text-white' data-action="behaviour--removeable#remove">
        delete
      </a>
    </div>
    </div>
  </template>
</div>
